<!DOCTYPE html>
<html><head><meta charset="utf-8"/><meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>Payment — YogaGuru</title>
<style>body{font-family:Arial;padding:24px;background:#f6f7fb} .box{max-width:520px;margin:0 auto;background:#fff;border:1px solid #e5e7eb;border-radius:12px;padding:18px} input{width:100%;padding:10px;border:1px solid #cbd5e1;border-radius:8px;margin-top:8px}</style><script src="https://checkout.razorpay.com/v1/checkout.js"></script></head>
<body><div class="box">
<h2>Complete your booking</h2>
<p id="summary" style="color:#64748b"></p>
<form id="payform">
<label>Your Name</label><input name="name" required=""/>
<label>WhatsApp Number</label><input name="phone" placeholder="e.g. 9876543210" required=""/>
<label>Coach</label><input id="coach" name="coach" readonly=""/>
<label>Plan</label><input id="plan" name="plan" readonly=""/>
<button style="margin-top:12px;padding:12px 14px;background:#0ea5a6;color:#fff;border:none;border-radius:10px;font-weight:800">Pay Now</button>
<button class="btn primary" id="rzp-pay" type="button">Pay with Razorpay (Test)</button></form></div>
<script>
const p = new URLSearchParams(location.search);
const coach = p.get('coach')||''; const plan = p.get('plan')||'Free Trial';
document.getElementById('coach').value = coach; document.getElementById('plan').value = plan;
document.getElementById('summary').textContent = (coach?coach+' — ':'') + plan;
document.getElementById('payform').addEventListener('submit', e=>{e.preventDefault(); alert('✅ Payment demo.'); location.href='index.html';});
</script>
<script>
(function(){
  function amountFor(plan){
    switch(plan){
      case '7-Day Pass': return 35000;       // amounts in paise
      case '15-Day Pass': return 50000;
      case '30-Day Pass': return 99900;
      case 'VIP 1:1': return 500000;
      default: return 0;
    }
  }
  const params = new URLSearchParams(location.search);
  const coach = params.get('coach') || 'YogaGuru';
  const plan = params.get('plan') || 'Free Trial';
  const date = params.get('date') || '';
  const time = params.get('time') || '';

  const payBtn = document.getElementById('rzp-pay');
  if(payBtn){
    payBtn.addEventListener('click', function(){
      const amt = amountFor(plan);
      if(amt <= 0){ alert('Free Trial does not require payment.'); return; }
      const rzp = new Razorpay({
        key: 'rzp_test_xxxxxxxxxxxxx', // TODO: replace with your Razorpay test key
        amount: amt,
        currency: 'INR',
        name: 'YogaGuru',
        description: plan + ' — ' + coach,
        prefill: {},
        notes: { coach, plan, date, time },
        theme: { color: '#0ea5a6' },
        handler: function (response){
          alert('✅ Payment success (test) — ID: ' + response.razorpay_payment_id);
          window.location.href = 'index.html?v=paid';
        }
      });
      rzp.open();
    });
  }
})();</script></body></html>